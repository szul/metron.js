if("undefined"!=typeof metron)throw"Error: A library named [metron] already exists in the current namespace.";metron={},metron["class"]={extend:function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)},clone:function(t){function e(){}return e.prototype=t,new e},mixin:function(t,e){for(var n in e.prototype)null!==e.prototype[n]&&"undefined"==typeof t.prototype[n]&&(t.prototype[n]=e.prototype[n])}},metron.dictionary=function(t){if(this.length=0,this.items={},null!=t)for(var e in t)t.hasOwnProperty(e)&&(this.items[e]=t[e],this.length++);return{setItem:function(t,e){this.hasItem(t)||this.length++,this.items[t]=e},getItem:function(t){return this.hasItem(t)?this.items[t]:null},hasItem:function(t){return this.items.hasOwnProperty(t)},removeItem:function(t){return this.hasItem(t)?(this.length--,delete this.items[t],1):0},keys:function(){var t=[];for(var e in this.items)this.hasItem(e)&&t.push(e);return t},values:function(){var t=[];for(var e in this.items)this.hasItem(e)&&t.push(this.items[e]);return t},each:function(t){var e=0;for(var n in this.items)t(n,this.items[n],e),e++},clear:function(){this.items={},this.length=0}}},metron.web={querystring:function(t){if("undefined"==typeof document)throw"Error: No document object found. Environment may not contain a DOM.";if("string"==typeof t){for(var e,n=[],r=new RegExp("(?:\\?|&)"+t+"=(.*?)(?=&|$)","gi");null!=(e=r.exec(document.location.search));)n.push(e[1]);return n}},cookie:{get:function(t){if("undefined"!=typeof document){for(var e=document.cookie.split(";"),n=0;n<e.length;n++){var r=e[n].substr(0,e[n].indexOf("=")),o=e[n].substr(e[n].indexOf("=")+1);if(r.trim()==t)return o}return null}throw"Error: No document object found. Environment may not contain a DOM."},set:function(t,e,n){if("undefined"==typeof document)throw"Error: No document object found. Environment may not contain a DOM.";var r=t+"="+e+';path="/"';"undefined"!=typeof n&&(r+=";expires="+n.toUTCString()),document.cookie=r},"delete":function(t){if("undefined"==typeof document)throw"Error: No document object found. Environment may not contain a DOM.";document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}},headers:{get:function(t){if("undefined"!=typeof document){if(null!=t){var e=new XMLHttpRequest;return e.open("HEAD",document.location,!1),e.send(null),e.getResponseHeader(t)}var e=new XMLHttpRequest;return e.open("HEAD",document.location,!1),e.send(null),e.getAllResponseHeaders()}throw"Error: No document object found. Environment may not contain a DOM."}}},metron.elements={textarea:{clean:function(t){return t.value.replace(/\r?\n/g,"\r\n")}}},metron.observer=function(){function t(t){n=setInterval(function(){t.onTimer(t)},1e3*e)}var e,n;return{watch:function(e,n){e=e,n=n,t(this)},stop:function(){n&&(clearInterval(n),n=null)}}}(),metron.guid=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return{newGuid:function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}}(),"undefined"==typeof $m&&($m=metron),"undefined"==typeof extend&&(extend=metron["class"].extend),"undefined"==typeof clone&&(clone=metron["class"].clone),"undefined"==typeof mixin&&(mixin=metron["class"].mixin),"undefined"==typeof Guid&&(Guid=metron.guid),"undefined"==typeof Dictionary&&(Dictionary=metron.dictionary),"undefined"!=typeof document&&"undefined"!=typeof document.location&&("undefined"==typeof document.location.querystring&&(document.location.querystring=metron.web.querystring),"undefined"==typeof document.location.headers&&(document.location.headers=metron.web.headers)),String.prototype.lower=function(){return this.toLowerCase()},String.prototype.upper=function(){return this.toUpperCase()},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.normalize=function(){return this.replace(/^\s*|\s(?=\s)|\s*$/g,"")},String.prototype.startsWith=function(t){return this.slice(0,t.length)==t},String.prototype.endsWith=function(t){return this.slice(-t.length)==t},String.prototype.capFirst=function(){if(1==this.length)return this.toUpperCase();if(this.length>0){var t=/^(\(|\[|"|')/;return t.test(this)?this.substring(0,2).toUpperCase()+this.substring(2):this.substring(0,1).toUpperCase()+this.substring(1)}return null},String.prototype.capWords=function(){var t=/\s/,e=this.split(t);if(1==e.length)return e[0].capFirst();if(e.length>1){for(var n="",r=0;r<e.length;r++)null!=e[r].capFirst()&&(n+=e[r].capFirst()+" ");return n.trim(),n}return null},String.prototype.truncateWords=function(t){var e=this.split(/\s+/);return e.length>t?e.slice(0,t).join(" "):e.join(" ")},String.prototype.truncateWordsWithHtml=function(t){for(var e=[],n=this.truncateWords(t),r=n.match(/<[\/]?([^> ]+)[^>]*>/g),o=0;o<r.length;o++){var i=r[o].replace("/","");if(-1!=r[o].indexOf("/")&&-1!=e.indexOf(i))e.remove(i);else{if(-1!=r[o].indexOf("/"))continue;e.push(r[o])}}for(var s=0;s<e.length;s++)n+=e[s].replace("<","</").replace(/(\s*)(\w+)=("[^<>"]*"|'[^<>']*'|\w+)/g,"");return n},String.prototype.stripHtml=function(){var t=this.replace(/<[\/]?([^> ]+)[^>]*>/g,"");return t=t.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,""),t=t.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,""),t=t.replace(/<!--[\s\S]*?-->/g,""),t=t.replace("&nbsp;"," "),t=t.replace("&amp;","&")},String.prototype.escapeHtml=function(){var t=this.replace(/"/g,"&quot;");return t.replace(/&(?!\w+;)/g,"&amp;"),t.replace(/>/g,"&gt;"),t.replace(/</g,"&lt;"),t},String.prototype.toBool=function(){return String.isNullOrEmpty(this)?!1:"true"===this.lower()||"1"===this.lower()||"y"===this.lower()||"t"===this.lower()?!0:!1},String.prototype.contains=function(t){return-1!==this.indexOf(t)?!0:!1},String.prototype.slugify=function(){return this.lower().normalize().replace(/[^a-z0-9]/gi,"-")},String.prototype.toPhoneNumber=function(){try{return this.substring(0,3)+"-"+this.substring(3,6)+"-"+this.substring(6)}catch(t){return this}},String.isNullOrEmpty=function(t){return null==t||""===t.trim()?!0:!1},Number.prototype.toBool=function(){return 0===this?!1:!0},Number.prototype.random=function(t,e){if(isNaN(t)||isNaN(e))throw"Error: Only numbers are accepted as arguments.";return Math.floor(Math.random()*(parseInt(e,10)-parseInt(t,10)+1)+parseInt(t,10))},Array.prototype.empty=function(){return this.splice(0,this.length)},Array.prototype.isEmpty=function(){return 0===this.length?!0:!1},Array.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Array.prototype.remove=function(t){var e=this.indexOf(t);-1!=e&&this.splice(e,1)},Array.prototype.toObjectArray=function(t){if(null==t)throw"Error: Property name must be provided for conversion.";var e=this;if("string"==typeof e[0]||"number"==typeof e[0]||"boolean"==typeof e[0]){for(var n=0;n<e.length;n++){var r=e[n];e[n]={},e[n][t]=r}return e}return this};
